{"ast":null,"code":"var _jsxFileName = \"/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/layout/navComponents/notifications/NotificationsMenu.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { discardNotification } from '../../../../redux/actions/userActions';\nimport { makeStyles, Typography, MenuItem, Menu } from '@material-ui/core';\nimport LocalFloristIcon from '@material-ui/icons/LocalFlorist';\nimport NotificationItem from './NotificationItem';\nimport { ProjectInvitation } from './NotificationConstants';\nimport { BACKGROUND_COLORS } from '../../../../util/colorsContants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  menuContainer: {\n    maxHeight: 350,\n    overflow: 'auto',\n    width: 450,\n    outline: 'none',\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      minWidth: 300\n    }\n  },\n  header: {\n    padding: '5px 15px',\n    color: '#777777',\n    fontWeight: 600,\n    backgroundColor: '#d6ecff',\n    borderBottom: '1px solid #e8e2e2',\n    outline: 'none'\n  },\n  emptyContainer: {\n    padding: 10,\n    display: 'flex',\n    width: '100%',\n    alignItems: 'center'\n  },\n  emptyIcon: {\n    width: theme.spacing(6),\n    height: theme.spacing(6),\n    marginRight: 10\n  }\n}));\nconst NotificationsMenu = _ref => {\n  _s();\n  let {\n    anchorEl,\n    handleClose\n  } = _ref;\n  const {\n    socket\n  } = useSelector(state => state.socketConnection);\n  const {\n    notifications\n  } = useSelector(state => state.userLogin);\n  const [notificationsIndexes, setNotificationsIndexes] = useState([]);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const history = useHistory();\n\n  // close notifications menu and \"close\" all of \"opened\" notifications\n  const closeHandle = () => {\n    handleClose();\n    setNotificationsIndexes([]);\n  };\n\n  // Keeps track of which notifications are \"opened\", meaning have discard and accept buttons displayed\n  const projectNotificationHandle = index => {\n    // remove index from array\n    const value = notificationsIndexes.indexOf(index);\n    if (value !== -1) {\n      setNotificationsIndexes(prevIndexes => {\n        const array = [...prevIndexes];\n        array.splice(value, 1);\n        return array;\n      });\n    } else {\n      // push index of the clicked notification to the array\n      setNotificationsIndexes(prevIndexes => [...prevIndexes, index]);\n    }\n  };\n  const discardNotificationHandle = (notificationId, index) => {\n    dispatch(discardNotification(notificationId, index, () => closeHandle()));\n  };\n  const actionHandle = notification => {\n    if (notification.type === ProjectInvitation) {\n      const background = BACKGROUND_COLORS[Math.floor(Math.random() * Math.floor(5))];\n      socket.emit('project-join', {\n        projectId: notification.project._id,\n        background\n      }, () => {\n        closeHandle();\n        history.push(\"/project/\".concat(notification.project._id));\n      });\n    } else if (notification.task) {\n      history.push(\"/project/\".concat(notification.project._id, \"/\").concat(notification.task._id));\n    } else if (!notification.task && notification.project) {\n      history.push(\"/project/\".concat(notification.project._id));\n    }\n    closeHandle();\n  };\n  return /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: closeHandle,\n    getContentAnchorEl: null,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'left'\n    },\n    MenuListProps: {\n      style: {\n        padding: 0\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle1\",\n      className: classes.header,\n      children: \"Notifications\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.menuContainer,\n      children: notifications && notifications.items.length > 0 ? notifications.items.map((notification, index) => /*#__PURE__*/_jsxDEV(NotificationItem, {\n        projectNotificationHandle: projectNotificationHandle,\n        actionHandle: actionHandle,\n        discardNotificationHandle: discardNotificationHandle,\n        notificationsIndexes: notificationsIndexes,\n        notification: notification,\n        index: index\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(MenuItem, {\n        disabled: true,\n        style: {\n          padding: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.emptyContainer,\n          children: [/*#__PURE__*/_jsxDEV(LocalFloristIcon, {\n            className: classes.emptyIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: \"Nothing to see here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationsMenu, \"96BLk8FnN3kBUgMdTYKlUbrxe9k=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useStyles, useHistory];\n});\n_c = NotificationsMenu;\nexport default NotificationsMenu;\nvar _c;\n$RefreshReg$(_c, \"NotificationsMenu\");","map":{"version":3,"names":["React","useState","useHistory","useDispatch","useSelector","discardNotification","makeStyles","Typography","MenuItem","Menu","LocalFloristIcon","NotificationItem","ProjectInvitation","BACKGROUND_COLORS","jsxDEV","_jsxDEV","useStyles","theme","menuContainer","maxHeight","overflow","width","outline","breakpoints","down","minWidth","header","padding","color","fontWeight","backgroundColor","borderBottom","emptyContainer","display","alignItems","emptyIcon","spacing","height","marginRight","NotificationsMenu","_ref","_s","anchorEl","handleClose","socket","state","socketConnection","notifications","userLogin","notificationsIndexes","setNotificationsIndexes","dispatch","classes","history","closeHandle","projectNotificationHandle","index","value","indexOf","prevIndexes","array","splice","discardNotificationHandle","notificationId","actionHandle","notification","type","background","Math","floor","random","emit","projectId","project","_id","push","concat","task","keepMounted","open","Boolean","onClose","getContentAnchorEl","anchorOrigin","vertical","horizontal","MenuListProps","style","children","variant","className","fileName","_jsxFileName","lineNumber","columnNumber","items","length","map","disabled","_c","$RefreshReg$"],"sources":["/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/layout/navComponents/notifications/NotificationsMenu.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { discardNotification } from '../../../../redux/actions/userActions';\n\nimport { makeStyles, Typography, MenuItem, Menu } from '@material-ui/core';\nimport LocalFloristIcon from '@material-ui/icons/LocalFlorist';\n\nimport NotificationItem from './NotificationItem';\nimport { ProjectInvitation } from './NotificationConstants';\nimport { BACKGROUND_COLORS } from '../../../../util/colorsContants';\n\nconst useStyles = makeStyles((theme) => ({\n  menuContainer: {\n    maxHeight: 350,\n    overflow: 'auto',\n    width: 450,\n    outline: 'none',\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      minWidth: 300,\n    },\n  },\n  header: {\n    padding: '5px 15px',\n    color: '#777777',\n    fontWeight: 600,\n    backgroundColor: '#d6ecff',\n    borderBottom: '1px solid #e8e2e2',\n    outline: 'none',\n  },\n  emptyContainer: {\n    padding: 10,\n    display: 'flex',\n    width: '100%',\n    alignItems: 'center',\n  },\n  emptyIcon: {\n    width: theme.spacing(6),\n    height: theme.spacing(6),\n    marginRight: 10,\n  },\n}));\n\nconst NotificationsMenu = ({ anchorEl, handleClose }) => {\n  const { socket } = useSelector((state) => state.socketConnection);\n  const { notifications } = useSelector((state) => state.userLogin);\n  const [notificationsIndexes, setNotificationsIndexes] = useState([]);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const history = useHistory();\n\n  // close notifications menu and \"close\" all of \"opened\" notifications\n  const closeHandle = () => {\n    handleClose();\n    setNotificationsIndexes([]);\n  };\n\n  // Keeps track of which notifications are \"opened\", meaning have discard and accept buttons displayed\n  const projectNotificationHandle = (index) => {\n    // remove index from array\n    const value = notificationsIndexes.indexOf(index);\n    if (value !== -1) {\n      setNotificationsIndexes((prevIndexes) => {\n        const array = [...prevIndexes];\n        array.splice(value, 1);\n        return array;\n      });\n    } else {\n      // push index of the clicked notification to the array\n      setNotificationsIndexes((prevIndexes) => [...prevIndexes, index]);\n    }\n  };\n\n  const discardNotificationHandle = (notificationId, index) => {\n    dispatch(discardNotification(notificationId, index, () => closeHandle()));\n  };\n\n  const actionHandle = (notification) => {\n    if (notification.type === ProjectInvitation) {\n      const background =\n        BACKGROUND_COLORS[Math.floor(Math.random() * Math.floor(5))];\n      socket.emit(\n        'project-join',\n        { projectId: notification.project._id, background },\n        () => {\n          closeHandle();\n          history.push(`/project/${notification.project._id}`);\n        }\n      );\n    } else if (notification.task) {\n      history.push(\n        `/project/${notification.project._id}/${notification.task._id}`\n      );\n    } else if (!notification.task && notification.project) {\n      history.push(`/project/${notification.project._id}`);\n    }\n    closeHandle();\n  };\n\n  return (\n    <Menu\n      anchorEl={anchorEl}\n      keepMounted\n      open={Boolean(anchorEl)}\n      onClose={closeHandle}\n      getContentAnchorEl={null}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      MenuListProps={{ style: { padding: 0 } }}\n    >\n      <Typography variant='subtitle1' className={classes.header}>\n        Notifications\n      </Typography>\n      <div className={classes.menuContainer}>\n        {notifications && notifications.items.length > 0 ? (\n          notifications.items.map((notification, index) => (\n            <NotificationItem\n              key={index}\n              projectNotificationHandle={projectNotificationHandle}\n              actionHandle={actionHandle}\n              discardNotificationHandle={discardNotificationHandle}\n              notificationsIndexes={notificationsIndexes}\n              notification={notification}\n              index={index}\n            />\n          ))\n        ) : (\n          <MenuItem disabled style={{ padding: 0 }}>\n            <div className={classes.emptyContainer}>\n              <LocalFloristIcon className={classes.emptyIcon} />\n              <Typography variant='body2'>Nothing to see here</Typography>\n            </div>\n          </MenuItem>\n        )}\n      </div>\n    </Menu>\n  );\n};\n\nexport default NotificationsMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}