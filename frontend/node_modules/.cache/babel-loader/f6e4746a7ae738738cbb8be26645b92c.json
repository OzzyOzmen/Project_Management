{"ast":null,"code":"var _jsxFileName = \"/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/dashboard/lists/TitleUpdate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { PROJECT_DATA_LIST_TITLE_UPDATE } from '../../../redux/constants/projectConstants';\nimport { taskFieldUpdate } from '../../../redux/actions/projectActions';\nimport { InputBase, makeStyles } from '@material-ui/core';\nimport Loader from '../../Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  input: {\n    border: '2px solid transparent',\n    padding: '4px 2px',\n    marginRight: 29\n  },\n  inputOpen: {\n    border: \"2px solid \".concat(theme.palette.primary.main),\n    padding: '4px 2px',\n    marginRight: 29,\n    backgroundColor: '#fff',\n    borderRadius: 5,\n    zIndex: 1\n  },\n  dragFix: {\n    cursor: 'pointer !important',\n    zIndex: 1,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 34,\n    bottom: 0\n  }\n}));\nconst TitleUpdate = _ref => {\n  _s();\n  let {\n    currentTitle,\n    listIndex,\n    projectId,\n    taskId,\n    disabled\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    socket\n  } = useSelector(state => state.socketConnection);\n  const [title, setTitle] = useState(currentTitle);\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const titleRef = useRef();\n  const classes = useStyles();\n  useEffect(() => setTitle(currentTitle), [currentTitle]);\n  const keyPressHandle = e => {\n    if (e.key === 'Escape') titleRef.current.blur();else if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (title === currentTitle) titleRef.current.blur();else if (title !== currentTitle && title.trim() !== '') {\n        if (!isNaN(listIndex)) {\n          socket.emit('list-title-update', {\n            title,\n            projectId,\n            listIndex\n          }, () => {\n            dispatch({\n              type: PROJECT_DATA_LIST_TITLE_UPDATE,\n              payload: {\n                title,\n                listIndex\n              }\n            });\n            titleRef.current.blur();\n          });\n        } else if (taskId) {\n          setLoading(true);\n          dispatch(taskFieldUpdate(taskId, projectId, title, 'title', () => setLoading(false)));\n        }\n      }\n    }\n  };\n  const blurHandle = () => {\n    if (!loading) setTitle(currentTitle);\n    setOpen(false);\n  };\n  const focusHandle = () => {\n    setOpen(true);\n    titleRef.current.select();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isNaN(listIndex) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: !open && classes.dragFix,\n      onClick: () => titleRef.current.focus()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputBase, {\n        inputRef: titleRef,\n        className: open ? classes.inputOpen : classes.input,\n        inputProps: {\n          spellCheck: false\n        },\n        color: \"primary\",\n        onBlur: blurHandle,\n        multiline: true,\n        value: title,\n        fullWidth: true,\n        onMouseDown: e => e.stopPropagation(),\n        onFocus: focusHandle,\n        onKeyDown: keyPressHandle,\n        onChange: e => setTitle(e.target.value),\n        disabled: loading || disabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {\n        button: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(TitleUpdate, \"YpZQbE+m4/LNiH4SwU8qiLrcJig=\", false, function () {\n  return [useDispatch, useSelector, useStyles];\n});\n_c = TitleUpdate;\nexport default TitleUpdate;\nvar _c;\n$RefreshReg$(_c, \"TitleUpdate\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useDispatch","useSelector","PROJECT_DATA_LIST_TITLE_UPDATE","taskFieldUpdate","InputBase","makeStyles","Loader","jsxDEV","_jsxDEV","Fragment","_Fragment","useStyles","theme","input","border","padding","marginRight","inputOpen","concat","palette","primary","main","backgroundColor","borderRadius","zIndex","dragFix","cursor","position","top","left","right","bottom","TitleUpdate","_ref","_s","currentTitle","listIndex","projectId","taskId","disabled","dispatch","socket","state","socketConnection","title","setTitle","loading","setLoading","open","setOpen","titleRef","classes","keyPressHandle","e","key","current","blur","shiftKey","preventDefault","trim","isNaN","emit","type","payload","blurHandle","focusHandle","select","children","className","onClick","focus","fileName","_jsxFileName","lineNumber","columnNumber","style","width","inputRef","inputProps","spellCheck","color","onBlur","multiline","value","fullWidth","onMouseDown","stopPropagation","onFocus","onKeyDown","onChange","target","button","_c","$RefreshReg$"],"sources":["/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/dashboard/lists/TitleUpdate.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { PROJECT_DATA_LIST_TITLE_UPDATE } from '../../../redux/constants/projectConstants';\nimport { taskFieldUpdate } from '../../../redux/actions/projectActions';\n\nimport { InputBase, makeStyles } from '@material-ui/core';\n\nimport Loader from '../../Loader';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    border: '2px solid transparent',\n    padding: '4px 2px',\n    marginRight: 29,\n  },\n  inputOpen: {\n    border: `2px solid ${theme.palette.primary.main}`,\n    padding: '4px 2px',\n    marginRight: 29,\n    backgroundColor: '#fff',\n    borderRadius: 5,\n    zIndex: 1,\n  },\n  dragFix: {\n    cursor: 'pointer !important',\n    zIndex: 1,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 34,\n    bottom: 0,\n  },\n}));\n\nconst TitleUpdate = ({\n  currentTitle,\n  listIndex,\n  projectId,\n  taskId,\n  disabled,\n}) => {\n  const dispatch = useDispatch();\n  const { socket } = useSelector((state) => state.socketConnection);\n  const [title, setTitle] = useState(currentTitle);\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const titleRef = useRef();\n  const classes = useStyles();\n\n  useEffect(() => setTitle(currentTitle), [currentTitle]);\n\n  const keyPressHandle = (e) => {\n    if (e.key === 'Escape') titleRef.current.blur();\n    else if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (title === currentTitle) titleRef.current.blur();\n      else if (title !== currentTitle && title.trim() !== '') {\n        if (!isNaN(listIndex)) {\n          socket.emit(\n            'list-title-update',\n            {\n              title,\n              projectId,\n              listIndex,\n            },\n            () => {\n              dispatch({\n                type: PROJECT_DATA_LIST_TITLE_UPDATE,\n                payload: { title, listIndex },\n              });\n              titleRef.current.blur();\n            }\n          );\n        } else if (taskId) {\n          setLoading(true);\n          dispatch(\n            taskFieldUpdate(taskId, projectId, title, 'title', () =>\n              setLoading(false)\n            )\n          );\n        }\n      }\n    }\n  };\n  const blurHandle = () => {\n    if (!loading) setTitle(currentTitle);\n    setOpen(false);\n  };\n  const focusHandle = () => {\n    setOpen(true);\n    titleRef.current.select();\n  };\n  return (\n    <>\n      {!isNaN(listIndex) && (\n        <div\n          className={!open && classes.dragFix}\n          onClick={() => titleRef.current.focus()}\n        />\n      )}\n      <div style={{ position: 'relative', width: '100%' }}>\n        <InputBase\n          inputRef={titleRef}\n          className={open ? classes.inputOpen : classes.input}\n          inputProps={{ spellCheck: false }}\n          color='primary'\n          onBlur={blurHandle}\n          multiline\n          value={title}\n          fullWidth\n          onMouseDown={(e) => e.stopPropagation()}\n          onFocus={focusHandle}\n          onKeyDown={keyPressHandle}\n          onChange={(e) => setTitle(e.target.value)}\n          disabled={loading || disabled}\n        />\n        {loading && <Loader button />}\n      </div>\n    </>\n  );\n};\n\nexport default TitleUpdate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}