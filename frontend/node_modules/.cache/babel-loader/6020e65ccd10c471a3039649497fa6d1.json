{"ast":null,"code":"var _jsxFileName = \"/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/dashboard/taskModal/modalComponents/TaskDescription.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { taskFieldUpdate } from '../../../../redux/actions/projectActions';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { makeStyles, Button, ClickAwayListener } from '@material-ui/core';\nimport Loader from '../../../Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(() => ({\n  root: {\n    '& .ck-editor__editable_inline': {\n      minHeight: 100\n    }\n  },\n  textContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    '& svg': {\n      marginRight: 15\n    }\n  },\n  text: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  description: {\n    margin: '8px 25px'\n  },\n  descriptionTextArea: {\n    '& .MuiFilledInput-multiline': {\n      padding: '15px 10px',\n      fontSize: '0.95rem',\n      color: '#525252'\n    },\n    '& .MuiFilledInput-multiline:before': {\n      borderBottomStyle: 'solid'\n    }\n  },\n  actions: {\n    marginTop: 10,\n    textAlign: 'right',\n    '& >button:first-child': {\n      marginRight: 5\n    }\n  },\n  fixEditorClosing: {\n    width: '100%',\n    display: 'flex'\n  },\n  caption: {\n    color: '#979a9a'\n  }\n}));\nconst TaskDescription = _ref => {\n  _s();\n  let {\n    task,\n    userPermissions,\n    disabled\n  } = _ref;\n  const dispatch = useDispatch();\n  const [descriptionEditOpen, setDescriptionEditOpen] = useState(false);\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const classes = useStyles();\n  useEffect(() => {\n    setDescription(task.description);\n  }, [task.description]);\n  const updateHandle = () => {\n    if (description !== task.description) {\n      setLoading(true);\n      dispatch(taskFieldUpdate(task._id, task.projectId, description, 'description', () => {\n        setLoading(false);\n        setDescriptionEditOpen(false);\n      }));\n    } else setDescriptionEditOpen(false);\n  };\n  const escBlurHandle = e => {\n    if (e.key === 'Escape') {\n      setDescriptionEditOpen(false);\n      const [editor] = document.getElementsByClassName('ck-content');\n      if (editor) editor.blur();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n    mouseEvent: 'onMouseDown',\n    onClickAway: () => !loading && descriptionEditOpen && setDescriptionEditOpen(false),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      onKeyDown: escBlurHandle,\n      children: [/*#__PURE__*/_jsxDEV(CKEditor, {\n        editor: ClassicEditor,\n        config: {\n          toolbar: userPermissions >= 1 && ['heading', '|', 'bold', 'italic', 'blockQuote', 'link', 'numberedList', 'bulletedList', 'alignment', 'insertTable', '|', 'undo', 'redo']\n        },\n        disabled: loading || disabled,\n        data: task.description,\n        onChange: (event, editor) => setDescription(editor.getData()),\n        onFocus: (event, editor) => setDescriptionEditOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), descriptionEditOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          onClick: () => setDescriptionEditOpen(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          variant: \"outlined\",\n          disabled: loading,\n          onClick: updateHandle,\n          children: [\"Save\", loading && /*#__PURE__*/_jsxDEV(Loader, {\n            button: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskDescription, \"kca25MMmd/5P+JCEiMU+lP4+lYM=\", false, function () {\n  return [useDispatch, useStyles];\n});\n_c = TaskDescription;\nexport default TaskDescription;\nvar _c;\n$RefreshReg$(_c, \"TaskDescription\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","taskFieldUpdate","CKEditor","ClassicEditor","makeStyles","Button","ClickAwayListener","Loader","jsxDEV","_jsxDEV","useStyles","root","minHeight","textContainer","display","justifyContent","marginRight","text","alignItems","description","margin","descriptionTextArea","padding","fontSize","color","borderBottomStyle","actions","marginTop","textAlign","fixEditorClosing","width","caption","TaskDescription","_ref","_s","task","userPermissions","disabled","dispatch","descriptionEditOpen","setDescriptionEditOpen","setDescription","loading","setLoading","classes","updateHandle","_id","projectId","escBlurHandle","e","key","editor","document","getElementsByClassName","blur","mouseEvent","onClickAway","children","className","onKeyDown","config","toolbar","data","onChange","event","getData","onFocus","fileName","_jsxFileName","lineNumber","columnNumber","onClick","variant","button","_c","$RefreshReg$"],"sources":["/Users/ozzyozmencelik/Projects/project-management/frontend/src/components/dashboard/taskModal/modalComponents/TaskDescription.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { useDispatch } from 'react-redux';\nimport { taskFieldUpdate } from '../../../../redux/actions/projectActions';\n\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\nimport { makeStyles, Button, ClickAwayListener } from '@material-ui/core';\n\nimport Loader from '../../../Loader';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    '& .ck-editor__editable_inline': {\n      minHeight: 100,\n    },\n  },\n  textContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    '& svg': {\n      marginRight: 15,\n    },\n  },\n  text: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n\n  description: {\n    margin: '8px 25px',\n  },\n  descriptionTextArea: {\n    '& .MuiFilledInput-multiline': {\n      padding: '15px 10px',\n      fontSize: '0.95rem',\n      color: '#525252',\n    },\n    '& .MuiFilledInput-multiline:before': {\n      borderBottomStyle: 'solid',\n    },\n  },\n\n  actions: {\n    marginTop: 10,\n    textAlign: 'right',\n    '& >button:first-child': {\n      marginRight: 5,\n    },\n  },\n  fixEditorClosing: {\n    width: '100%',\n    display: 'flex',\n  },\n  caption: {\n    color: '#979a9a',\n  },\n}));\n\nconst TaskDescription = ({ task, userPermissions, disabled }) => {\n  const dispatch = useDispatch();\n  const [descriptionEditOpen, setDescriptionEditOpen] = useState(false);\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const classes = useStyles();\n  useEffect(() => {\n    setDescription(task.description);\n  }, [task.description]);\n  const updateHandle = () => {\n    if (description !== task.description) {\n      setLoading(true);\n      dispatch(\n        taskFieldUpdate(\n          task._id,\n          task.projectId,\n          description,\n          'description',\n          () => {\n            setLoading(false);\n            setDescriptionEditOpen(false);\n          }\n        )\n      );\n    } else setDescriptionEditOpen(false);\n  };\n\n  const escBlurHandle = (e) => {\n    if (e.key === 'Escape') {\n      setDescriptionEditOpen(false);\n      const [editor] = document.getElementsByClassName('ck-content');\n      if (editor) editor.blur();\n    }\n  };\n\n  return (\n    <ClickAwayListener\n      mouseEvent={'onMouseDown'}\n      onClickAway={() =>\n        !loading && descriptionEditOpen && setDescriptionEditOpen(false)\n      }\n    >\n      <div className={classes.root} onKeyDown={escBlurHandle}>\n        <CKEditor\n          editor={ClassicEditor}\n          config={{\n            toolbar: userPermissions >= 1 && [\n              'heading',\n              '|',\n              'bold',\n              'italic',\n              'blockQuote',\n              'link',\n              'numberedList',\n              'bulletedList',\n              'alignment',\n              'insertTable',\n              '|',\n              'undo',\n              'redo',\n            ],\n          }}\n          disabled={loading || disabled}\n          data={task.description}\n          onChange={(event, editor) => setDescription(editor.getData())}\n          onFocus={(event, editor) => setDescriptionEditOpen(true)}\n        />\n        {descriptionEditOpen && (\n          <div className={classes.actions}>\n            <Button\n              color='secondary'\n              onClick={() => setDescriptionEditOpen(false)}\n            >\n              Cancel\n            </Button>\n            <Button\n              color='primary'\n              variant='outlined'\n              disabled={loading}\n              onClick={updateHandle}\n            >\n              Save\n              {loading && <Loader button />}\n            </Button>\n          </div>\n        )}\n      </div>\n    </ClickAwayListener>\n  );\n};\n\nexport default TaskDescription;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}